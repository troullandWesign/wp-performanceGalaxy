{% extends 'base.twig' %}
{% block content %}

<main class="view {{ body_class }}" >
    <section class="ly archive-content">

        <div class="container filters">
            <div class="filter active">Tout</div>
            {% for term in categories %}
                {% if term.slug != 'non-classe' %}
                    <a class="filter {{ category.slug == term.slug ? 'active' }}" href="{{ site.link ~ '/actualites/' ~ term.slug }}">{{ term.name }}</a>
                {% endif %}
            {% endfor %}
        </div>
        
        <div class="container listing">
            {% for post in posts %}
                <a class="card-news swiper-slide" href="{{ post.permalink }}" title="{{ post.post_title }}">
                    {% include 'img_webp.twig' with {url: post.thumbnail, alt: post.post_title} %}
                    <div class="meta">
                        <div class="infos">
                            <span class="date">Publi√© le {{ post.post_date|date('d/m/Y') }}</span>
                            <span class="share"></span>
                        </div>
                        
                        <h3>{{ post.post_title|nop }}</h3>
                        <div class="desc">
                            <p>{{ post.post_content|striptags|length > 210 ? post.post_content|striptags|slice(0, 210) ~ '...' : post.post_content|striptags  }}</p>
                        </div>
                    </div>
                </a>
            {% endfor %}
        </div>
        
        {% if pagination.total > 1 %}
            <div class="container pagination">
                <ul>
                    {% for page in pagination.pages %}
                        <li class="page-btn {{ page.current ? 'active' : '' }}">
                            {% if page.link %}
                                <a href="{{ page.link }}" title="{{ page.name|notags }}"><span>{{ page.name }}</span></a>
                            {% else %}
                                <span>{{ page.name }}</span>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
    </section>
</main>
{% endblock content %}