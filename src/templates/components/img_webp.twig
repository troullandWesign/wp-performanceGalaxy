<picture class="img-wrap {{ class ? class }}" id="{{ id ? id }}">
    {% set src = url ? url : image.url %}
    {% set webp_src = width is defined or height is defined ? (width and height ? src|resize(width, height)|towebp : (width ? src|resize(width)|towebp : src|resize(0, height)|towebp)) : src|towebp %}
    {% set jpg_src = width is defined or height is defined ? (width and height ? src|resize(width, height)|tojpg : (width ? src|resize(width)|tojpg : src|resize(0, height)|tojpg)) : src|tojpg %}
    {% set default_src = width is defined or height is defined ? (width and height ? src|resize(width, height) : (width ? src|resize(width) : src|resize(0, height))) : src %}

    <source srcset="{{ webp_src }}" type="image/webp">
    <source srcset="{{ jpg_src }}" type="image/jpeg">
    <img src="{{ default_src }}" alt="{{ alt ? alt : image.alt }}" loading="lazy">
</picture>